<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body class="bg-white font-sans">

  <!-- Header (Same as cart page) -->
  <header class="bg-white text-black py-4 px-6 border-b-4 border-yellow-400 shadow-sm z-50">
    <div class="max-w-screen-xl mx-auto flex items-center justify-between flex-wrap">

      <!-- Category Wrapper -->
      <div class="flex items-center space-x-6">
        <a href="../Landing Page/index.html" class="flex items-center space-x-2 hover:text-orange-300">
          <img src="./pngs/Logoo.png" alt="Logo" class="w-6 h-6 object-contain" />
          <span class="text-sm font-medium">Home Page</span>
        </a>
        <a href="../Dashboard/junkhub.html" class="flex items-center space-x-2 hover:text-yellow-500">
          <i class="fas fa-store text-md"></i>
          <span class="text-sm font-medium">Shop</span>
        </a>
        <a href="../Dashboard/junkhub.html" class="flex items-center space-x-2 hover:text-yellow-500">
          <i class="fas fa-box text-md"></i>
          <span class="text-sm font-medium">Products</span>
        </a>
      </div>

      <!-- Search Box -->
      <div class="relative max-w-xs w-full mx-4 mt-4 lg:mt-0">
        <input
          type="text"
          placeholder="Search..."
          class="w-full px-4 py-1.5 text-sm rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400"
        />
      </div>

      <!-- Icons -->
      <div class="flex items-center space-x-4 mt-4 lg:mt-0">
        <!-- Notification -->
        <div class="relative text-xl hover:text-yellow-500 cursor-pointer">
          <i class="fas fa-bell"></i>
          <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full">3</span>
        </div>
        <!-- Cart -->
        <div class="text-xl hover:text-yellow-500 cursor-pointer">
          <i class="fas fa-shopping-cart"></i>
        </div>
        <!-- Profile -->
        <div class="w-8 h-8 rounded-full overflow-hidden border-2 border-yellow-400">
          <img src="./pngs/prof.png" alt="Profile" class="w-full h-full object-cover" />
        </div>
      </div>

    </div>
  </header>

  <!-- Checkout Section -->
  <main class="p-6 max-w-screen-xl mx-auto lg:flex lg:space-x-8">
    <!-- Payment Form -->
    <div class="lg:w-2/3">
      <h2 class="text-3xl font-bold mb-6">Checkout</h2>
      
      <!-- Messages Container -->
      <div id="messages-container" class="mb-6"></div>
      
      <form id="checkout-form">
        <!-- Shipping Address -->
        <div class="mb-8">
          <h3 class="text-xl font-semibold mb-4 flex items-center">
            <span class="bg-yellow-400 text-black w-8 h-8 rounded-full flex items-center justify-center mr-3">1</span>
            Shipping Address
          </h3>
          <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">Address *</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">City *</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Postal Code *</label>
                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number *</label>
                <input type="tel" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
              </div>
            </div>
          </div>
        </div>
        
        <!-- Payment Method -->
        <div class="mb-8">
          <h3 class="text-xl font-semibold mb-4 flex items-center">
            <span class="bg-yellow-400 text-black w-8 h-8 rounded-full flex items-center justify-center mr-3">2</span>
            Payment Method
          </h3>
          <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <div class="space-y-4">
              <div class="flex items-center">
                <input type="radio" id="credit-card" name="payment" checked class="h-4 w-4 text-yellow-500 focus:ring-yellow-400">
                <label for="credit-card" class="ml-3 block text-sm font-medium text-gray-700">Credit Card</label>
              </div>
              <div id="credit-card-fields" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div class="md:col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-1">Card Number *</label>
                  <input type="text" id="card-number" placeholder="1234 5678 9012 3456" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Expiration Date *</label>
                  <input type="text" id="expiry-date" placeholder="MM/YY" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Security Code *</label>
                  <input type="text" id="cvc" placeholder="CVC" required class="w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-400 focus:outline-none">
                </div>
              </div>
              
              <div class="border-t pt-4 mt-4">
                <div class="flex items-center">
                  <input type="radio" id="paypal" name="payment" class="h-4 w-4 text-yellow-500 focus:ring-yellow-400">
                  <label for="paypal" class="ml-3 block text-sm font-medium text-gray-700">PayPal</label>
                </div>
                <div id="paypal-notice" class="bg-yellow-100 border-l-4 border-yellow-400 p-4 mt-4 hidden">
                  <p class="text-sm text-yellow-700">
                    <i class="fas fa-info-circle mr-2"></i>
                    You will be redirected to PayPal to complete your payment
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button id="complete-order" type="submit" class="w-full bg-yellow-500 text-black font-semibold py-3 rounded hover:bg-yellow-600 transition duration-200">
          Complete Order
        </button>
      </form>
    </div>
    
    <!-- Order Summary -->
    <aside class="lg:w-1/3 mt-8 lg:mt-0">
      <div class="bg-[#fdf6ef] p-6 rounded-lg sticky top-6">
        <h3 class="text-xl font-semibold mb-4">Order Summary</h3>
        
        <!-- Product -->
        <div class="flex items-center justify-between mb-4 pb-4 border-b">
          <div class="flex items-center space-x-4">
            <img src="./pngs/Mother Board.png" alt="Mother Board" class="w-16 h-auto" />
            <div>
              <h4 class="font-medium">Mother Board</h4>
              <p class="text-sm text-gray-500">2 items</p>
            </div>
          </div>
          <p class="font-medium">$10.00</p>
        </div>
        
        <!-- Summary Details -->
        <div class="space-y-2 text-sm mb-4">
          <div class="flex justify-between"><span>Subtotal</span><span>$10.00</span></div>
          <div class="flex justify-between"><span>Shipping Discount</span><span class="text-green-600">- $2.00</span></div>
          <div class="flex justify-between"><span>Shipping</span><span>$4.00</span></div>
          <div class="flex justify-between"><span>Tax</span><span>$0.00</span></div>
        </div>
        
        <hr class="my-4" />
        
        <div class="flex justify-between text-lg font-bold mb-6">
          <span>Total</span>
          <span class="order-total">$12.00</span>
        </div>
        
        <div class="bg-yellow-100 border-l-4 border-yellow-400 p-4">
          <p class="text-sm text-yellow-700">
            <i class="fas fa-info-circle mr-2"></i>
            On prepaid orders get an extra discount of 5%
          </p>
        </div>
        
        <div class="flex items-center space-x-2 text-sm text-gray-600 mt-4">
          <i class="fas fa-lock"></i>
          <span>Secure checkout</span>
        </div>
      </div>
    </aside>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DOM Elements
      const checkoutForm = document.getElementById('checkout-form');
      const completeOrderBtn = document.getElementById('complete-order');
      const paymentMethods = document.querySelectorAll('input[name="payment"]');
      const creditCardFields = document.getElementById('credit-card-fields');
      const paypalNotice = document.getElementById('paypal-notice');
      
      // Initialize
      paypalNotice.style.display = 'none';
      
      // Payment method toggle
      paymentMethods.forEach(method => {
        method.addEventListener('change', function() {
          if (this.id === 'credit-card') {
            creditCardFields.style.display = 'grid';
            paypalNotice.classList.add('hidden');
            
            // Make credit card fields required
            document.querySelectorAll('#credit-card-fields input').forEach(input => {
              input.required = true;
            });
          } else if (this.id === 'paypal') {
            creditCardFields.style.display = 'none';
            paypalNotice.classList.remove('hidden');
            
            // Make credit card fields not required
            document.querySelectorAll('#credit-card-fields input').forEach(input => {
              input.required = false;
            });
          }
        });
      });
      
      
      checkoutForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (validateForm()) {
          
          completeOrderBtn.disabled = true;
          completeOrderBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
          
         
          processPayment()
            .then(orderDetails => {
              // On success
              showSuccessMessage(orderDetails);
              completeOrderBtn.innerHTML = 'Order Complete!';
              
              // In a real app, you would redirect to confirmation page
              // window.location.href = '/order-confirmation.html';
            })
            .catch(error => {
              // On error
              showErrorMessage(error);
              completeOrderBtn.disabled = false;
              completeOrderBtn.innerHTML = 'Complete Order';
            });
        }
      });
      
      
      function validateForm() {
        let isValid = true;
        const requiredFields = checkoutForm.querySelectorAll('[required]');
        
        // Reset error states
        document.querySelectorAll('.border-red-500').forEach(el => {
          el.classList.remove('border-red-500');
        });
        document.querySelectorAll('.error-message').forEach(el => {
          el.remove();
        });
        
        // Validate required fields
        requiredFields.forEach(field => {
          if (!field.value.trim()) {
            field.classList.add('border-red-500');
            isValid = false;
            
            // Create error message if it doesn't exist
            const errorMsg = document.createElement('p');
            errorMsg.className = 'error-message text-red-500 text-xs mt-1';
            errorMsg.textContent = 'This field is required';
            field.parentNode.appendChild(errorMsg);
          }
        });
        
        // Additional credit card validation if selected
        if (document.getElementById('credit-card').checked) {
          const cardNumber = document.getElementById('card-number').value.replace(/\s+/g, '');
          const expiryDate = document.getElementById('expiry-date').value;
          const cvc = document.getElementById('cvc').value;
          
          if (!validateCardNumber(cardNumber)) {
            document.getElementById('card-number').classList.add('border-red-500');
            const errorMsg = document.createElement('p');
            errorMsg.className = 'error-message text-red-500 text-xs mt-1';
            errorMsg.textContent = 'Invalid card number';
            document.getElementById('card-number').parentNode.appendChild(errorMsg);
            isValid = false;
          }
          
          if (!validateExpiryDate(expiryDate)) {
            document.getElementById('expiry-date').classList.add('border-red-500');
            const errorMsg = document.createElement('p');
            errorMsg.className = 'error-message text-red-500 text-xs mt-1';
            errorMsg.textContent = 'Invalid expiration date';
            document.getElementById('expiry-date').parentNode.appendChild(errorMsg);
            isValid = false;
          }
          
          if (!validateCVC(cvc)) {
            document.getElementById('cvc').classList.add('border-red-500');
            const errorMsg = document.createElement('p');
            errorMsg.className = 'error-message text-red-500 text-xs mt-1';
            errorMsg.textContent = 'Invalid security code';
            document.getElementById('cvc').parentNode.appendChild(errorMsg);
            isValid = false;
          }
        }
        
        return isValid;
      }
      
      // Card validation helpers
      function validateCardNumber(number) {
        // Simple Luhn algorithm check
        return /^\d{13,19}$/.test(number) && luhnCheck(number);
      }
      
      function validateExpiryDate(date) {
        if (!/^\d{2}\/\d{2}$/.test(date)) return false;
        
        const [month, year] = date.split('/').map(Number);
        const currentYear = new Date().getFullYear() % 100;
        const currentMonth = new Date().getMonth() + 1;
        
        if (year < currentYear || (year === currentYear && month < currentMonth)) {
          return false;
        }
        
        return month >= 1 && month <= 12;
      }
      
      function validateCVC(cvc) {
        return /^\d{3,4}$/.test(cvc);
      }
      
      function luhnCheck(number) {
        let sum = 0;
        let alternate = false;
        
        for (let i = number.length - 1; i >= 0; i--) {
          let digit = parseInt(number.charAt(i), 10);
          
          if (alternate) {
            digit *= 2;
            if (digit > 9) {
              digit -= 9;
            }
          }
          
          sum += digit;
          alternate = !alternate;
        }
        
        return sum % 10 === 0;
      }
      
      // Simulate payment processing
      function processPayment() {
        return new Promise((resolve, reject) => {
          // Simulate API call delay
          setTimeout(() => {
            // 80% chance of success for demo purposes
            if (Math.random() < 0.8) {
              resolve({
                orderId: 'ORD-' + Math.floor(Math.random() * 1000000),
                amount: document.querySelector('.order-total').textContent,
                date: new Date().toLocaleString()
              });
            } else {
              reject(new Error('Payment processing failed. Please try again or use a different payment method.'));
            }
          }, 2000);
        });
      }
      
      // Show success message
      function showSuccessMessage(orderDetails) {
        const successHTML = `
          <div class="bg-green-100 border-l-4 border-green-500 p-4 mb-6">
            <div class="flex">
              <div class="flex-shrink-0">
                <i class="fas fa-check-circle text-green-500"></i>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-medium text-green-800">Order successful!</h3>
                <div class="mt-2 text-sm text-green-700">
                  <p>Order ID: ${orderDetails.orderId}</p>
                  <p>Amount: ${orderDetails.amount}</p>
                  <p>Date: ${orderDetails.date}</p>
                  <p class="mt-2">A confirmation has been sent to your email.</p>
                </div>
              </div>
            </div>
          </div>
        `;
        
        document.getElementById('messages-container').innerHTML = successHTML;
      }
      
      // Show error message
      function showErrorMessage(error) {
        const errorHTML = `
          <div class="bg-red-100 border-l-4 border-red-500 p-4 mb-6">
            <div class="flex">
              <div class="flex-shrink-0">
                <i class="fas fa-exclamation-circle text-red-500"></i>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-medium text-red-800">Payment Error</h3>
                <div class="mt-2 text-sm text-red-700">
                  <p>${error.message}</p>
                </div>
              </div>
            </div>
          </div>
        `;
        
        document.getElementById('messages-container').innerHTML = errorHTML;
      }
      
      // Format card number input
      const cardNumberInput = document.getElementById('card-number');
      if (cardNumberInput) {
        cardNumberInput.addEventListener('input', function(e) {
          let value = e.target.value.replace(/\s+/g, '');
          if (value.length > 16) value = value.substr(0, 16);
          
          // Add space every 4 digits
          value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
          e.target.value = value;
        });
      }
      
      // Format expiry date input
      const expiryDateInput = document.getElementById('expiry-date');
      if (expiryDateInput) {
        expiryDateInput.addEventListener('input', function(e) {
          let value = e.target.value.replace(/\D/g, '');
          if (value.length > 4) value = value.substr(0, 4);
          
          // Add slash after 2 digits
          if (value.length > 2) {
            value = value.replace(/^(\d{2})/, '$1/');
          }
          e.target.value = value;
        });
      }
    });
  </script>
</body>
</html>